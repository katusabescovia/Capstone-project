# ───────────────────────────────────────────────
# Netlify build configuration
# ───────────────────────────────────────────────

[build]
  # The folder to publish (frontend or root)
  publish = "."                  
  # Folder containing Netlify functions
  functions = "netlify/functions"  
  # Command to copy routes into functions folder before build
  command = "npm run build:netlify"  

# ───────────────────────────────────────────────
# Redirect API requests to Netlify function
# ───────────────────────────────────────────────

[[redirects]]
  from = "/api/*"
  to = "/.netlify/functions/api/:splat"
  status = 200
  force = true

# Optional: catch all other routes (for SPA-like API behavior)
[[redirects]]
  from = "/*"
  to = "/.netlify/functions/api/:splat"
  status = 200
  force = true